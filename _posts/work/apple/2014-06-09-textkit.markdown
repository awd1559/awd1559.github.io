---
layout:     post
title:      "ios framework"
subtitle:   " \"ios framework\""
date:       2014-06-09 12:00:00
author:     "awd"
header-img: "img/post-bg-2015.jpg"
tags:
    - apple
---
NSTextStorage* textStorage = [[NSTextStorage alloc]  initWithString:@“”];
NSLayoutManager* layoutManager = [[NSLayoutManager alloc] init];
[textStorage addLayoutManager:layoutManager];
NSTextContainer* textContainer = [[NSTextContainer alloc] initWithSize:rect.size];
[layoutManager addTextContainer:textContainer];

textView = [[UITextView alloc] initWithFrame:textViewRect textContainer:_textContainer];

[textView.textStorage beginEditing];
NSDictionary* attrsDic = @{NSTextEffectAttributeName:NSTextEffectLetterpressStyle};    //凸版效果
NSMutableAttributedString* attrStr = [[NSMutableAttributedString alloc] initWithString:@“” attributes:attrsDic];
[textStorage setAttributedString:attrStr];
[self markWord:@"我" inTextStorage:textStorage];
[textView.textStorage endEditing];



-(void) markWord:(NSString *)word inTextStorage:(NSTextStorage *)textStorage{
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:word options:0 error:nil];
    NSArray* matches = [regex matchesInString:_textView.text options:0 range:NSMakeRange(0, [_textView.text length])];
    
    for(NSTextCheckingResult* match in matches){
        NSRange matchRange = [match range];
        [textStorage addAttribute:NSBackgroundColorAttributeName value:[UIColor redColor] range:matchRange];
    }
}


动态字体
self.textView.font = [UIFont preferredFontForTextStyle:UIFontTextStyleBody];
这样设置之后，文本控件就会以用户设定的字体大小及粗细显示
在系统字体修改时，系统会给运行中的程序发送UIContentSizeCategoryDidChangeNotification通知
[[NSNotificationCenter defaultCenter] addObserver:self 
	selector:@selector(preferredContentSizeChanged:) 
	name:UIContentSizeCategoryDidChangeNotification 
	object:nil]; 

